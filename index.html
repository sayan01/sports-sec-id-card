<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Description -->
  <meta name="description" content="Sports SEC ID download">
  <meta property="og:description" content="Sports SEC ID download">
  <meta name="twitter:description" content="Sports SEC ID download">

  <!-- Author -->
  <meta name="author" content="Sayan">
  <meta name="twitter:site" content="@_sayang2001">
  <meta name="twitter:creator" content="@_sayang2001">

  <!-- Title -->
  <title>Sports SEC ID download</title>
  <meta property="og:title" content="Sports SEC ID download">
  <meta name="twitter:title" content="Sports SEC ID download">

  <!-- Bootstrap CSS and JS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <link rel="stylesheet" href="style.css">

</head>
<body style="text-align: center;">
  <div class="container">
      <h1 class="display-1">Download your Sports SEC ID Card</h1>
    <label for="roll" class="form-label">Enter your Roll Number:</label>
    <input type="text" name="roll" id="roll" placeholder="example 22BTBC01" class="form-control" autofocus>
    <input type="submit" value="Download" class="btn btn-primary form-control" onclick="download()">
  </div>

  <script>
    document.getElementById("roll").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        download();
      }
    });

    function download(){
      fetch("participants/list")
        .then((response) => response.text(response))
        .then((data) => {
          var rollno = document.querySelector('#roll').value.toUpperCase().trim();
          if(rollno.length == 8 && rollno.startsWith('22') && data.includes(rollno)){
            document.body.innerHTML +=
            `<a href="participants/id/${rollno}.jpg" id="downlink" download="${rollno}-Sports-SEC-ID.jpg">Download</a>`
            linkdown = document.querySelector('#downlink');
            linkdown.click();
            document.body.removeChild(linkdown);
          } else {
            alert('Wrong Roll Number, kindly input correct Roll Number');
            document.querySelector('#roll').value = "";
          }
        });
    }
  </script>
</body>
</html>
